sudo: true
matrix:
  include:
    - language: java
      jdk: openjdk8
      env: TOOL=InterProScan-v5
      install: travis/install-interproscan5.sh
      script:
        - bash travis/run-interproscan5.sh

    - language: perl
      perl: 5.24
      env: TOOL=TransDecoder.Longorfs-v5.0.2
      install: travis/install-transdecoder-v5.0.2.sh
      script:
        - bash travis/run-transdecoder.longorfs-v5.0.2.sh

    - language: perl
      perl: 5.24
      env: TOOL=TransDecoder.Predict-v5.0.2
      before_install:
        - sudo apt-get -qq update
        - sudo apt-get install libdb6.0-dev libdb6.0
      install:
            - cpanm DB_File
            - travis/install-transdecoder-v5.0.2.sh
      script:
        - bash travis/run-transdecoder.predict-v5.0.2.sh

    - language: perl
      perl: 5.24
      env: TOOL=TransDecoder-Workflow-v5.0.2
      before_install:
        - sudo apt-get -qq update
        - sudo apt-get install libdb6.0-dev libdb6.0
      install:
        - cpanm DB_File
        - travis/install-transdecoder-v5.0.2.sh
      script:
        - bash travis/run-transdecoder-v5.0.2.sub-workflow.sh

    - language: cpp
      compiler: clang
      env: TOOL=Diamond-v0.9.21
      install: travis/install-diamond-v0.9.21.sh
      script:
        - bash travis/run-diamond-v0.9.21.sh

    - language: c
      compiler: clang
      env: TOOL=phmmer
      install: travis/install-phmmer.sh
      script:
        - bash travis/run-phmmer.sh

    - language: c
      compiler: clang
      env: TOOL=cmsearch-v1.1.2
      install: travis/install-cmsearch-v1.1.2.sh
      script:
        - bash travis/run-cmsearch-v1.1.2.sh

    - language: perl
      perl: 5.24
      env: TOOL=cmsearch-deoverlap
      install: travis/install-cmsearch-deoverlap-v0.02.sh
      script:
        - bash travis/run-cmsearch-deoverlap-v0.02.sh

    - language: c
      compiler: clang
      env: TOOL=cmsearch-multimodel-Workflow
      install:
        - travis/install-cmsearch-v1.1.2.sh
        - travis/install-cmsearch-deoverlap-v0.02.sh
      script:
        - bash travis/run-cmsearch.sub-workflow.sh

    - language: python
      env: TOOL=Workflow validation tests
      install:
        - travis/install-nodejs.sh
        - travis/install-cwl-runner.sh
      script:
        - bash travis/workflow-cwl-validation-tests.sh

    - language: go
      services:
        - docker
      env:
        global:
          - DOCKER_VERSION=1.10.1-0~trusty
      before_install:
        # list docker-engine versions
        - apt-cache madison docker-engine
        # upgrade docker-engine to specific version
        - sudo apt-get -o Dpkg::Options::="--force-confnew" install -y docker-engine=1.10.1-0~trusty
      script:
        - docker version